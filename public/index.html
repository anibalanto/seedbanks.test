<!doctype html>

<html ng-app="sb">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
		<!-- Optional theme -->
		<link rel="stylesheet" href="bootstrap/css/bootstrap-theme.min.css">
		<!-- Latest compiled and minified JavaScript -->
		<script src="bootstrap/3.3.1/js/bootstrap.min.js"></script>
	    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<title>Hello SeedBank</title>
		<script src="angular.min.js"></script>
    	<script src="seedbanks.js"></script>
    	<!--script src="angulartest.js"></script-->
   	    <script type="text/javascript" src="angular-resource.min.js"></script>
   	    <script type="text/javascript" src="angular-hateoas.js"></script>
	</head>

	<body>
	<div class="container">
		<div class="starter-template">
		<h1>Banco de Semillas</h1>
		
			<!--div ng-controller="Ctrl">
				Buscar cosechas por ID de Farmer:
				<form name="findHarvest" ng-submit="submit()">
					<input type="text" ng-model="text" name="text">
					<input type="submit" value="Buscar"><pre>list={{list}}</pre>	
				</form>
				<ul>
					<li ng-repeat="item in list">({{item}})</li>
				</ul>					
				<button ng-click="submit()">sub</button>
			</div-->
		
			<!-- CU 1. Harvest Repo: Find Harvest by Farmer ID -->
	
			<h3>Variedades</h3>
			<div ng-controller="VarietyController as VCtrl">
				<ul>
					<li ng-repeat="variedad in VCtrl.variedades">
						<a href="{{variedad._links['self']['href']}}">{{variedad._links.self}}</a>
					</li>
				</ul>
			</div>

		<h3>Variedades</h3>
		<div ng-controller="VarietyController as VCtrl">
			<ul>
				<li ng-repeat="variedad in VCtrl.variedades">
					<a href="{{variedad._links['self']['href']}}">{{variedad.name}}</a>
				</li>
			</ul>
		</div>
		
		<!--
		<h3>Consulta de Cosechas</h3>
		<div ng-controller="FindHarvestCtrl as FHCtrl">
			ID Variedad: <input type="text" ng-model="FHCtrl.idvariedad" ng-init="FHCtrl.idvariedad == 2">
			<ul>
				<li ng-repeat="h in FHCtrl.cosechas">
					Name: {{h.harvestCodeValidator}}
				</li>
			</ul>
		</div>
		-->
		
		<h3>Consulta de Cosechas 2</h3>
		<div ng-controller="FindHarvestCtrl2 as FHCtrl">
			Posici√≥n: <input type="text" ng-model="FHCtrl.idvariedad">
				<p ng-show="FHCtrl.idvariedad < FHCtrl.cosechas.length">Name: {{FHCtrl.cosechas[FHCtrl.idvariedad].harvestCodeValidator}}</p>
		</div>

		<h3>Consulta de Cosechas 3</h3>
		<div ng-controller="FindHarvestCtrl2 as FHCtrl">
			Harvest ID: <input type="text" ng-model="query">
			<ul>
				<li ng-repeat="cosecha in FHCtrl.cosechas | filter:'/harvest/'+query+'/farmer'">
					Fecha: {{cosecha.date}} <br>
					Code: {{cosecha.harvestCodeValidator}} <br>
					Compartida: {{cosecha.shared}} <br>
					Farmer: {{cosecha._links['farmer']['href']}}
				</li>
			</ul>
		</div>



		<!--
		<h3>Cosechas</h3>
		<div ng-controller="HarvestResCtrl as HCtrl">
			<ul>
				<li ng-repeat="h in HCtrl.harvests">
					Name: {{h.date}}
				</li>
			</ul>
		</div>
		-->
		
		<h3> Harvest Resource </h3>
		<div ng-controller="HarvestResourceCtrl as hrc">
			Length: {{hrc.harvests.length}}
			<ul>
				<li ng-repeat="h in hrc.harvests">{{h['codeValidator']}} un harvest</li>
			</ul>			
		</div>
		
		
		<!-- CREATE --><!--
		<div ng-controller="HarvestNewResource as hnr"></div>-->
		<!-- UPDATE -->
		<div ng-controller="HarvestUpdateResource"></div>
		<!-- DELETE -->
		<div ng-controller="HarvestDeleteResource"></div>

		<div ng-controller="newHarvestCtrl as nhc">
			<h3>Crear Cosecha</h3>
			<form name="newHarvestForm" ng-submit="submit()">
				<label>Farmer </label><input type="text" ng-model="farmer" name="farmer"><br>
				<label>Mother </label><input type="text" ng-model="mother" name="mother"><br>
				<label>Variety </label>
				<select ng-model="variety" name="variety">
					<option ng-repeat="v in nhc.varieties" value="{{v['_links']['self']['href']}}">{{v['name']}}</option>
				</select>
				<!--<input type="text" ng-model="variety" name="variety"><br>-->
				<label>Compartir </label><input type="checkbox" ng-model="shared" name="shared">
				<input type="submit" value="Crear">
			</form>
		</div>	

		<div ng-controller="newInterchangeCtrl as nic">
			<h3>Intercambiar semillas de cosecha</h3>
			<form name="newInterchangeForm" ng-submit="submit()" id="newinterchangeform">
				<input type="text" ng-model="variety" name="variety"/>
				<label>Harvest</label>
					<select name="harvest" ng-model="harvest" form="newinterchangeform">
						<option ng-repeat="h in nic.harvestsByName" value="{{h['_links']['self']['href']}}">{{h['_links']['variety']['name']}}</option>
					</select>

					<br>
				<label>Farmer receptor</label>
					<input type="text" ng-model="farmerReceptor" name="farmerReceptor">
				<!--
				<select name="farmers" ng-controller="FarmerCtrl">
					<option ng-repeat="f in FarmerCtrl.farmers" value="">{{f['_links']['self']['href']}}</option>
				</select>
				-->
				<br>
				
				<label>Score</label><input type="text" ng-model="score" name="score"><br>
				
				<input type="submit" value="Intercambiar">
			</form>
		</div>


	    <div ng-controller='DefaultCtrl'>
	        <input auto-complete ui-items="names" ng-model="selected">
	        selected = {{selected}}
	    </div>

		<!--
		<h3>Las variedades 2</h3>
		<div ng-controller="Variety">
			<div ng-repeat="v in varieties">
				<p>Name: {{v.name}}. Link is <a ng-href="">{{v["_links"]["self"]["href"]}}</a></p>
			</div>	
		</div>		
		-->
		</div>

		</div>
	</body>
</html>
